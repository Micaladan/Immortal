<% layout("layouts/boilerplate")%>
<script src='https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.css' rel='stylesheet' />

<div id="map" style="width: 100%; height: 500px;"></div>
    <a href="/people/new" class="btn btn-success" style="float: right;">Add a New Person</a>
    <h1 class="row">All People</h1>
    <div class="row">   
        <% for(let person of people) {%>
            <div class="card mb-3 col-lg-3">
                <div class="col">
                    <div class="col-md-4">
                        <img class="img-fluid" style="max-width: 128px" src="<%= person.image %>" alt="">
                    </div>
                    <div class="card-body col-md-8">
                        <h5 class="card-title"><%= person.name %></h5>
                        <p class="card-text text-truncate"><%= person.description %></p>
                        <p class="card-text">
                            <small class="text-muted"><%= person.location %></small>
                        </p>
                        <a href="/people/<%= person._id %>" class="btn btn-primary">View <%= person.name %></a>
                    </div>
                </div>
            </div>
        <% }%>
    
        <script>
            const mapToken = '<%-process.env.MAPBOX_TOKEN%>'
            const people = {features: <%- JSON.stringify(people) %>}
        </script>
        <script src="/javascripts/clusterMap.js"></script>